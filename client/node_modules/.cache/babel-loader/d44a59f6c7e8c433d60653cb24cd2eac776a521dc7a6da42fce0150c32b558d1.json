{"ast":null,"code":"import axios from \"axios\";\nimport { getUserId } from \"./userSession\";\n\n/**\n * Converts 'veterinary_care' → 'Veterinary Care'\n */\nexport const formatSearchType = type => {\n  if (!type) return \"Unknown Type\";\n  return type.split(\"_\").map(word => word.charAt(0).toUpperCase() + word.slice(1)).join(\" \");\n};\nexport const sanitizeString = (input, fallback = \"Unknown\") => {\n  if (!input || typeof input !== \"string\" || input.trim() === \"\") return fallback;\n  return input.trim();\n};\nexport const saveSearchQuery = async (searchType, searchResults, location, searchURL, originString, destinationString) => {\n  try {\n    const userId = getUserId();\n    console.log(`🛠 User ID: ${userId}`);\n    if (!userId) {\n      console.error(\"❌ No User ID found in localStorage.\");\n      return;\n    }\n    const formattedType = formatSearchType(searchType);\n    const payload = {\n      userId,\n      searchType: formattedType,\n      searchURL: searchURL || `${window.location.href}`,\n      location: {\n        origin: (location === null || location === void 0 ? void 0 : location.origin) || {},\n        destination: (location === null || location === void 0 ? void 0 : location.destination) || {},\n        string: {\n          from: sanitizeString(originString),\n          to: sanitizeString(destinationString)\n        }\n      }\n    };\n    console.log(\"🛠 Sending Payload →\", payload);\n    await axios.post(\"/api/queries/save\", payload);\n  } catch (error) {\n    console.error(\"❌ Error saving search query:\", error);\n  }\n};\nexport const fetchRecentSearches = async () => {\n  try {\n    const userId = getUserId();\n    const response = await axios.get(\"/api/queries/recent\", {\n      params: {\n        userId\n      }\n    });\n    return response.data;\n  } catch (error) {\n    console.error(\"Error fetching recent searches:\", error);\n    return [];\n  }\n};","map":{"version":3,"names":["axios","getUserId","formatSearchType","type","split","map","word","charAt","toUpperCase","slice","join","sanitizeString","input","fallback","trim","saveSearchQuery","searchType","searchResults","location","searchURL","originString","destinationString","userId","console","log","error","formattedType","payload","window","href","origin","destination","string","from","to","post","fetchRecentSearches","response","get","params","data"],"sources":["/home/eashr/pet-resources-app/client/src/utils/searchHandler.js"],"sourcesContent":["import axios from \"axios\";\nimport { getUserId } from \"./userSession\";\n\n/**\n * Converts 'veterinary_care' → 'Veterinary Care'\n */\nexport const formatSearchType = (type) => {\n  if (!type) return \"Unknown Type\";\n  return type\n    .split(\"_\")\n    .map((word) => word.charAt(0).toUpperCase() + word.slice(1))\n    .join(\" \");\n};\n\nexport const sanitizeString = (input, fallback = \"Unknown\") => {\n  if (!input || typeof input !== \"string\" || input.trim() === \"\") return fallback;\n  return input.trim();\n};\n\nexport const saveSearchQuery = async (\n  searchType,\n  searchResults,\n  location,\n  searchURL,\n  originString,\n  destinationString\n) => {\n  try {\n    const userId = getUserId();\n    console.log(`🛠 User ID: ${userId}`);\n    if (!userId) {\n      console.error(\"❌ No User ID found in localStorage.\");\n      return;\n    }\n\n    const formattedType = formatSearchType(searchType);\n    const payload = {\n      userId,\n      searchType: formattedType,\n      searchURL: searchURL || `${window.location.href}`,\n      location: {\n        origin: location?.origin || {},\n        destination: location?.destination || {},\n        string: {\n          from: sanitizeString(originString),\n          to: sanitizeString(destinationString),\n        },\n      },\n    };\n\n    console.log(\"🛠 Sending Payload →\", payload);\n    await axios.post(\"/api/queries/save\", payload);\n  } catch (error) {\n    console.error(\"❌ Error saving search query:\", error);\n  }\n};\n\nexport const fetchRecentSearches = async () => {\n  try {\n    const userId = getUserId();\n    const response = await axios.get(\"/api/queries/recent\", {\n      params: { userId },\n    });\n    return response.data;\n  } catch (error) {\n    console.error(\"Error fetching recent searches:\", error);\n    return [];\n  }\n};\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,SAAS,QAAQ,eAAe;;AAEzC;AACA;AACA;AACA,OAAO,MAAMC,gBAAgB,GAAIC,IAAI,IAAK;EACxC,IAAI,CAACA,IAAI,EAAE,OAAO,cAAc;EAChC,OAAOA,IAAI,CACRC,KAAK,CAAC,GAAG,CAAC,CACVC,GAAG,CAAEC,IAAI,IAAKA,IAAI,CAACC,MAAM,CAAC,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,GAAGF,IAAI,CAACG,KAAK,CAAC,CAAC,CAAC,CAAC,CAC3DC,IAAI,CAAC,GAAG,CAAC;AACd,CAAC;AAED,OAAO,MAAMC,cAAc,GAAGA,CAACC,KAAK,EAAEC,QAAQ,GAAG,SAAS,KAAK;EAC7D,IAAI,CAACD,KAAK,IAAI,OAAOA,KAAK,KAAK,QAAQ,IAAIA,KAAK,CAACE,IAAI,CAAC,CAAC,KAAK,EAAE,EAAE,OAAOD,QAAQ;EAC/E,OAAOD,KAAK,CAACE,IAAI,CAAC,CAAC;AACrB,CAAC;AAED,OAAO,MAAMC,eAAe,GAAG,MAAAA,CAC7BC,UAAU,EACVC,aAAa,EACbC,QAAQ,EACRC,SAAS,EACTC,YAAY,EACZC,iBAAiB,KACd;EACH,IAAI;IACF,MAAMC,MAAM,GAAGrB,SAAS,CAAC,CAAC;IAC1BsB,OAAO,CAACC,GAAG,CAAC,eAAeF,MAAM,EAAE,CAAC;IACpC,IAAI,CAACA,MAAM,EAAE;MACXC,OAAO,CAACE,KAAK,CAAC,qCAAqC,CAAC;MACpD;IACF;IAEA,MAAMC,aAAa,GAAGxB,gBAAgB,CAACc,UAAU,CAAC;IAClD,MAAMW,OAAO,GAAG;MACdL,MAAM;MACNN,UAAU,EAAEU,aAAa;MACzBP,SAAS,EAAEA,SAAS,IAAI,GAAGS,MAAM,CAACV,QAAQ,CAACW,IAAI,EAAE;MACjDX,QAAQ,EAAE;QACRY,MAAM,EAAE,CAAAZ,QAAQ,aAARA,QAAQ,uBAARA,QAAQ,CAAEY,MAAM,KAAI,CAAC,CAAC;QAC9BC,WAAW,EAAE,CAAAb,QAAQ,aAARA,QAAQ,uBAARA,QAAQ,CAAEa,WAAW,KAAI,CAAC,CAAC;QACxCC,MAAM,EAAE;UACNC,IAAI,EAAEtB,cAAc,CAACS,YAAY,CAAC;UAClCc,EAAE,EAAEvB,cAAc,CAACU,iBAAiB;QACtC;MACF;IACF,CAAC;IAEDE,OAAO,CAACC,GAAG,CAAC,sBAAsB,EAAEG,OAAO,CAAC;IAC5C,MAAM3B,KAAK,CAACmC,IAAI,CAAC,mBAAmB,EAAER,OAAO,CAAC;EAChD,CAAC,CAAC,OAAOF,KAAK,EAAE;IACdF,OAAO,CAACE,KAAK,CAAC,8BAA8B,EAAEA,KAAK,CAAC;EACtD;AACF,CAAC;AAED,OAAO,MAAMW,mBAAmB,GAAG,MAAAA,CAAA,KAAY;EAC7C,IAAI;IACF,MAAMd,MAAM,GAAGrB,SAAS,CAAC,CAAC;IAC1B,MAAMoC,QAAQ,GAAG,MAAMrC,KAAK,CAACsC,GAAG,CAAC,qBAAqB,EAAE;MACtDC,MAAM,EAAE;QAAEjB;MAAO;IACnB,CAAC,CAAC;IACF,OAAOe,QAAQ,CAACG,IAAI;EACtB,CAAC,CAAC,OAAOf,KAAK,EAAE;IACdF,OAAO,CAACE,KAAK,CAAC,iCAAiC,EAAEA,KAAK,CAAC;IACvD,OAAO,EAAE;EACX;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}