{"ast":null,"code":"import axios from \"axios\";\nimport { getUserId } from \"./userSession\";\n\n/**\n * Converts 'veterinary_care' → 'Veterinary Care'\n */\nexport const formatSearchType = type => {\n  if (!type) return \"Unknown Type\";\n  return type.split(\"_\").map(word => word.charAt(0).toUpperCase() + word.slice(1)).join(\" \");\n};\nexport const sanitizeString = (input, fallback = \"Unknown\") => {\n  if (!input || typeof input !== \"string\" || input.trim() === \"\") return fallback;\n  return input.trim();\n};\nexport const deleteRecentSearchById = async id => {\n  try {\n    await axios.delete(`/api/queries/delete/${id}`);\n  } catch (err) {\n    console.error(\"Error deleting recent search:\", err);\n  }\n};\nexport const saveSearchQuery = async (searchType, searchResults, location, searchURL, originString, destinationString) => {\n  try {\n    const userId = getUserId();\n    console.log(`🛠 User ID: ${userId}`);\n    if (!userId) {\n      console.error(\"❌ No User ID found in localStorage.\");\n      return;\n    }\n    const formattedType = formatSearchType(searchType);\n    const payload = {\n      userId,\n      searchType: formattedType,\n      searchURL: searchURL || `${window.location.href}`,\n      location: {\n        origin: (location === null || location === void 0 ? void 0 : location.origin) || {},\n        destination: (location === null || location === void 0 ? void 0 : location.destination) || {},\n        string: {\n          from: sanitizeString(originString),\n          to: sanitizeString(destinationString)\n        }\n      }\n    };\n    console.log(\"🛠 Sending Payload →\", payload);\n    await axios.post(\"/api/queries/save\", payload);\n  } catch (error) {\n    console.error(\"❌ Error saving search query:\", error);\n  }\n};\nexport const fetchRecentSearches = async () => {\n  try {\n    const userId = getUserId();\n    const response = await axios.get(\"/api/queries/recent\", {\n      params: {\n        userId\n      }\n    });\n    return response.data;\n  } catch (error) {\n    console.error(\"Error fetching recent searches:\", error);\n    return [];\n  }\n};","map":{"version":3,"names":["axios","getUserId","formatSearchType","type","split","map","word","charAt","toUpperCase","slice","join","sanitizeString","input","fallback","trim","deleteRecentSearchById","id","delete","err","console","error","saveSearchQuery","searchType","searchResults","location","searchURL","originString","destinationString","userId","log","formattedType","payload","window","href","origin","destination","string","from","to","post","fetchRecentSearches","response","get","params","data"],"sources":["/home/eashr/pet-resources-app/client/src/utils/searchHandler.js"],"sourcesContent":["import axios from \"axios\";\nimport { getUserId } from \"./userSession\";\n\n/**\n * Converts 'veterinary_care' → 'Veterinary Care'\n */\nexport const formatSearchType = (type) => {\n  if (!type) return \"Unknown Type\";\n  return type\n    .split(\"_\")\n    .map((word) => word.charAt(0).toUpperCase() + word.slice(1))\n    .join(\" \");\n};\n\nexport const sanitizeString = (input, fallback = \"Unknown\") => {\n  if (!input || typeof input !== \"string\" || input.trim() === \"\") return fallback;\n  return input.trim();\n};\n\nexport const deleteRecentSearchById = async (id) => {\n  try {\n    await axios.delete(`/api/queries/delete/${id}`);\n  } catch (err) {\n    console.error(\"Error deleting recent search:\", err);\n  }\n};\n\nexport const saveSearchQuery = async (\n  searchType,\n  searchResults,\n  location,\n  searchURL,\n  originString,\n  destinationString\n) => {\n  try {\n    const userId = getUserId();\n    console.log(`🛠 User ID: ${userId}`);\n    if (!userId) {\n      console.error(\"❌ No User ID found in localStorage.\");\n      return;\n    }\n\n    const formattedType = formatSearchType(searchType);\n    const payload = {\n      userId,\n      searchType: formattedType,\n      searchURL: searchURL || `${window.location.href}`,\n      location: {\n        origin: location?.origin || {},\n        destination: location?.destination || {},\n        string: {\n          from: sanitizeString(originString),\n          to: sanitizeString(destinationString),\n        },\n      },\n    };\n\n    console.log(\"🛠 Sending Payload →\", payload);\n    await axios.post(\"/api/queries/save\", payload);\n  } catch (error) {\n    console.error(\"❌ Error saving search query:\", error);\n  }\n};\n\nexport const fetchRecentSearches = async () => {\n  try {\n    const userId = getUserId();\n    const response = await axios.get(\"/api/queries/recent\", {\n      params: { userId },\n    });\n    return response.data;\n  } catch (error) {\n    console.error(\"Error fetching recent searches:\", error);\n    return [];\n  }\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}